<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Dashboard | Stackoverflow </title>
    <link rel="stylesheet" href="/css/header.css"/>
    <link rel="stylesheet" href="/css/sidebar.css"/>
    <link rel="stylesheet" href="/css/footer.css"/>
</head>
<body>
<header th:replace="~{fragments/header :: header(user=${loggedIn != null ? loggedIn : ''})}"/>

<main>
    <div th:replace="~{fragments/sidebar :: sidebar(questions=${questions},tags=${tags},users=${users})}"/>

    <section class="main-content">
        <section class="main-content-header">
            <div class="main-content-header-heading">
                <h2>All Questions</h2>
                <a th:href="@{/questions/ask}">
                    <button class="header-btn">Ask Questions</button>
                </a>
            </div>
            <div class="main-content-header-actions">
                <p th:text="${questions.size() + ' questions' }"/>
                <div class="main-content-header-actions-sort">
                    <li class="sort-tab selec">Newest</li>
                    <li class="sort-tab">Oldest</li>
                    <li class="sort-tab">MostLiked</li>
                </div>
                <button class="header-btn login-btn filter-btn">
                    <svg aria-hidden="true" class="svg-icon iconFilter" width="18" height="18" viewBox="0 0 18 18">
                        <path d="M2 4h14v2H2zm2 4h10v2H4zm8 4H6v2h6z"></path>
                    </svg>
                    Filters
                </button>
            </div>
        </section>

        <section class="main-content-question-section">
            <section th:each="question : ${questions}"
                     class="question-card">
                <div class="qs-side">
                    <p th:text="${question.upvotes} + ' votes'"/>
                    <p th:text="${question.downvotes} + ' downvotes'"/>
                    <p th:text="${question.answersCount} + ' answers'"/>
                </div>
                <div class="qs-content">
                    <a th:href="@{/questions/{id}(id=${question.id})}"><h4 th:text="${question.title}"/></a>
                    <div class="question-body" th:utext="${@htmlUtils.truncateHtml(question.body, 200)}">

                    </div>
                    <div>
                        <span class="qs-date" th:text="${#temporals.format(question.updatedAt, 'yyyy-MM-dd HH:mm')}"/>
                        <span class="qs-user" th:text="${question.author.username}"/>
                    </div>
                </div>
            </section>
            <section class="pagination">
                <a th:if="${current_page > 0}"
                   th:href="@{/questions?(page=${current_page - 1}, size=${size}, sort=${sort})}"
                   th:text="'Prev'"
                   class="header-btn">
                </a>
                <a th:each="page : ${#numbers.sequence(1, total_pages)}"
                   th:class="${page == current_page + 1} ? 'page-number current-page' : 'page-number'"
                   th:text="${page}"
                   th:href="@{/questions?(page=${page - 1}, size=${size}, sort=${sort})}"></a>
                <a th:if="${current_page < total_pages - 1}"
                   th:href="@{/questions?(page=${current_page + 1}, size=${size}, sort=${sort})}"
                   th:text="'Next'"
                   class="header-btn">
                </a>
            </section>
        </section>
    </section>

</main>
<footer th:replace="~{fragments/footer :: footer}"/>

</body>
<script>

</script>
</html>